


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stylesheets/style.css">
    <!-- <link rel="stylesheet" href="stylesheets/index.css"> -->
    <title>Portfolio</title>

</head>

<body>

    <header>

        <nav class="navbar">
            
            <a href="index.html">Home</a>
             <a href="server.html">Server Seting</a>
              <a href="js.html">js code public for future development</a>




            
        </nav>

    </header>

    <h2> js code  </h2>



  
    <p> const fetch = require('node-fetch');

const CLIENT_ID = "";
const CLIENT_SECRET = "";
const THING_ID = "";
const PROPERTY_ID = "";

exports.handler = async function(event, context) {
  try {
    // Step 1: Get token
    const authRes = await fetch("https://api2.arduino.cc/iot/v1/clients/token", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        grant_type: "client_credentials",
        client_id: CLIENT_ID,
        client_secret: CLIENT_SECRET,
        audience: "https://api2.arduino.cc/iot"
      })
    });
    const authData = await authRes.json();
    const token = authData.access_token;

    // Step 2: Get variable
    const dataRes = await fetch(`https://api2.arduino.cc/iot/v2/things/${THING_ID}/properties/${PROPERTY_ID}/lastvalue`, {
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      }
    });

    const data = await dataRes.json();
    return {
      statusCode: 200,
      body: JSON.stringify({ temp: data.value })
    };

  } catch (error) {
    return {
      statusCode: 500,
      body: JSON.stringify({ error: error.message })
    };
  }
};
</p>

   



<footer>
        <h5>Anatolie </h5>
        &copy; 2020
</footer>



</body>
</html>
